name: Deploy to Firebase Functions on merge
on:
  push:
    branches: 
      - master
    
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Install npm packages
      run: |
        cd functions
        npm ci
    - name:  Deploy to Firebase
      run: |
        firebase deploy --only functions
      # uses: w9jds/firebase-action@master
      # with:
      #     args: deploy --only functions
      env:
          FIREBASE_TOKEN: ${{ secrets.FIREBASE_SERVICE_ACCOUNT_URL2GO_295111 }}
